					利用多写 Redis 实现分布式锁原理与实现分析

一、关于分布式锁
  关于分布式锁，可能绝大部分人都会或多或少涉及到。
我举二个例子：
场景一：从前端界面发起一笔支付请求，如果前端没有做防重处理，那么可能在某一个时刻会有二笔一样的单子同时到达系统后台。

场景二：在 App 中下订单的时候，点击确认之后，没反应，就又点击了几次。在这种情况下，如果无法保证该接口的幂等性，那么将会出现重复下单问题。

在接收消息的时候，消息推送重复。如果处理消息的接口无法保证【幂等】，那么重复消费消息产生的影响可能会非常大。

类似这种场景，我们有很多种方法，可以使用【幂等操作】，也可以使用【锁的操作】。

我们先来解释一下什么是幂等操作：
   所谓幂等,简单地说,就是对接口的多次调用所产生的结果和调用一次结果是一致的。
    扩展一下，这里的接口，可以理解为对外发布的 HTTP 接口或者 Thrift 接口，也可以是接收消息的内部接口，甚至是一个内部方法或操作。